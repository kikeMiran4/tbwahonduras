(function(){define("mustache!templates/microSurveyView",["lib/mustache"],function(mustache){var escapedTemplate='<div class="microSurveyView">\n<div class="smallpadding pagepadding-horizontal">\n<div class="js-animate-container">\n<div class="js-survey">\n<div class="dib floatleft">\n<span class="icon-bwassignment-turned iconbig darkgrey"></span>\n</div>\n<div class="dib">\n<span class="question db bold">{{{question}}}</span>\n<span class="start-label">{{startLabel}}</span>\n<span class="options js-complete buttongroup">\n{{#range}}\n<button class="button customtip" title="Vote with {{.}}" value="{{.}}">\n<span class="icon-ok hidden"></span>\n<span class="label">{{.}}</span>\n</button>\n{{/range}}\n</span>\n<span class="end-label">{{endLabel}}</span>\n</div>\n</div>\n<div>\n<div class="js-message doublepadding-vertical"></div>\n</div>\n</div>\n</div>\n<a class="js-close icon-remove grey singlepadding abstop absright"></a>\n</div>\n';return function(data,partials,wrap){return mustache.render(escapedTemplate,data,partials,wrap)}});define("css!css/microSurvey.css",["css!css/compiled.css"],function(){});function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}define("src/views/MicroSurveyView",["backbone","underscore","jquery","mustache!templates/microSurveyView","css!css/microSurvey.css","src/packages/customtip"],function(Backbone,_,$,template){"use strict";var ANIMATION_DELAY=600;var ANIMATION_DURATION=450;var defaults={range:_.range(0,11),startLabel:"Poor",endLabel:"Excellent"};function slideDown($el){setTimeout($el.addClass.bind($el),ANIMATION_DURATION,"slideDown")}function slideUp(view){view.$(".microSurveyView").removeClass("slideDown");setTimeout(view.remove.bind(view),ANIMATION_DURATION)}function getSuccessMessage(options){if(typeof options.successMessage==="function"){return options.successMessage(options.answer)}return options.successMessage}function showSuccessMessage(view){var $animate,$survey,hideDuration;$animate=view.$(".js-animate-container");$survey=view.$(".js-survey");view.$(".js-message").html(getSuccessMessage(view.options));view.$("button").off("mouseenter mouseleave");setTimeout($animate.addClass.bind($animate),ANIMATION_DELAY,"animate");hideDuration=ANIMATION_DELAY+ANIMATION_DURATION;setTimeout($survey.addClass.bind($survey),hideDuration,"vhidden")}function addCheckMark($el){$(".icon-ok",$el).removeClass("hidden");$(".label",$el).addClass("vhidden");$el.addClass("navigation--bkgcolor2 checked")}var MicroSurveyView=Backbone.View.extend({events:{"click .js-complete button":function completeHandler(event){var $el=$(event.currentTarget);this.options.answer=$el.val();this.surveyAnswered=true;addCheckMark($el);showSuccessMessage(this);this.$el.off("click",".js-complete button");this.trigger(MicroSurveyView.EVENT_COMPLETED,this.options.answer)},"click .js-close":function closeHandler(){this.trigger(MicroSurveyView.EVENT_CLOSED,this.surveyAnswered);slideUp(this)}},constructor:function MicroSurveyView(options){Backbone.View.apply(this,arguments);options=options||{};if(!options.question){throw new Error('MicroSurveyView must be initialized with a "question" option')}if(!options.successMessage){throw new Error('MicroSurveyView must be initialized with a "successMessage" option')}if(["string","function"].indexOf(_typeof(options.successMessage))===-1){throw new Error('MicroSurveyView "successMessage" option must be from a string or function')}this.options=_.defaults(options,defaults);this.surveyAnswered=false},render:function render(){this.el.innerHTML=template(this.options);this.$("button").customtip({position:"bottom"});return this}},{EVENT_COMPLETED:"event_completed",EVENT_CLOSED:"event_closed",ANIMATION_DELAY:ANIMATION_DELAY,ANIMATION_DURATION:ANIMATION_DURATION,show:function show(options){var view=new MicroSurveyView(options);view.render();slideDown(view.$(".microSurveyView"));return view}});return MicroSurveyView});define("mustache!src/extensions/reports/templates/reports-types/snapshot",["lib/mustache"],function(mustache){var escapedTemplate='<p>Get a general overview of data tracked by a Query.</p>\n<p class="singlemargin-vertical">The Snapshot Report contains:</p>\n<ul>\n<li>volume history</li>\n<li>page types</li>\n<li>topics cloud</li>\n<li>top mentions</li>\n<li>top influencers</li>\n</ul>\n<p class="link-to-example-report doublepadding-bottom">\n<a target="_blank" class="js-example-report" href="/reports/examples/snapshot">See an example Report</a>\n</p>\n';return function(data,partials,wrap){return mustache.render(escapedTemplate,data,partials,wrap)}});define("mustache!src/extensions/reports/templates/reports-types/twitter",["lib/mustache"],function(mustache){var escapedTemplate='<p>Get an overview of data tracked on a Twitter channel.</p>\n<p class="singlemargin-vertical">The Twitter Channel Report contains:</p>\n<ul>\n<li>volume history</li>\n<li>follower trends</li>\n<li>most impactful Tweeters</li>\n<li>most impactful audience Tweets</li>\n<li>top hashtags</li>\n</ul>\n<p class="link-to-example-report doublepadding-bottom">\n<a target="_blank" class="js-example-report" href="/reports/examples/twitter">See an example Report</a>\n</p>\n';return function(data,partials,wrap){return mustache.render(escapedTemplate,data,partials,wrap)}});define("mustache!src/extensions/reports/templates/reports-types/benchmark",["lib/mustache"],function(mustache){var escapedTemplate='<p>Compare two Queries along the following metrics.</p>\n<p class="singlemargin-vertical">The Benchmark Report contains:</p>\n<ul>\n<li>volume history</li>\n<li>page types</li>\n<li>topics cloud</li>\n<li>top mentions</li>\n<li>top influencers</li>\n</ul>\n<p class="link-to-example-report doublepadding-bottom">\n<a target="_blank" class="js-example-report" href="/reports/examples/benchmark">See an example Report</a>\n</p>\n';return function(data,partials,wrap){return mustache.render(escapedTemplate,data,partials,wrap)}});define("src/extensions/reports/ReportTypeManager",["underscore","mustache!src/extensions/reports/templates/reports-types/snapshot","mustache!src/extensions/reports/templates/reports-types/twitter","mustache!src/extensions/reports/templates/reports-types/benchmark"],function(_,snapshotTemplate,twitterTemplate,benchmarkTemplate){"use strict";return{reportTypes:[{type:"snapshot",name:"Snapshot",description:"Snapshot Report",queryTypes:["text"],text:snapshotTemplate(),numberOfQueries:1},{type:"twitter",name:"Twitter",description:"Twitter Channel Report",queryTypes:["twitter"],text:twitterTemplate(),numberOfQueries:1},{type:"benchmark",name:"Benchmark",description:"Benchmark Report",queryTypes:["text"],text:benchmarkTemplate(),numberOfQueries:2}],getTypeDefinition:function getTypeDefinition(type){return _.findWhere(this.reportTypes,{type:type})}}});function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}define("src/extensions/reports/models/ReportSchedule",["backbone","underscore","src/extensions/reports/ReportTypeManager","bw-fe-helpers/urlHelper","bw-fe-helpers/isoDateHelper"],function(Backbone,_,reportTypeManager,urlHelper,isoDateHelper){"use strict";var MAX_NAME_LENGTH=30,INTERVAL_SPECS=[{type:"daily",description:"Every day",timespan:"P1D"},{type:"weekly",description:"Every week",timespan:"P7D"},{type:"fortnightly",description:"Every two weeks",timespan:"P14D"},{type:"monthly",description:"Every month",timespan:"P1M"},{type:"quarterly",description:"Every three months",timespan:"P3M"}];return Backbone.Validations.Model.extend({constructor:function ReportSchedule(){Backbone.Validations.Model.apply(this,arguments)},defaults:function defaults(){return{name:"",reportType:null,intervalType:"weekly",startDate:(new Date).toISOString(),nextRunAt:null}},validate:{name:{required:true,maxlength:MAX_NAME_LENGTH},reportType:{custom:"validateReportType"},startDate:{custom:"validateStartDate"},intervalType:{custom:"validateIntervalType"},timespan:{custom:"validateTimespan"},queryId:{custom:"validateQueryId"},userId:{type:"number",min:0}},url:function url(){var path="/sharable-reports/schedules/"+(this.id||"");return urlHelper.buildFullURL(path)},set:function set(key,value,options){var attrs={},interval;attrs[key]=value;if(_typeof(key)==="object"){attrs=key;options=value}if(attrs.intervalType){interval=_.findWhere(INTERVAL_SPECS,{type:attrs.intervalType});attrs.timespan=interval&&interval.timespan}Backbone.Validations.Model.prototype.set.call(this,attrs,options);if(this.isValid()){this.trigger("valid");return this}},save:function save(attributes,options){var savedAttributes=attributes&&Object.keys(attributes).length>0?attributes:this.toJSON();options=_.extend({},options,{patch:true});return Backbone.Validations.Model.prototype.save.call(this,savedAttributes,options)},parse:function parse(response){var queryData=response.queryData,interval=response.interval,res,keys=["id","name","reportType","timespan","userId","nextRunAt","lastRunAt","createdAt","updatedAt"];if(!queryData){throw new Error("Report should have a queryData property")}if(!interval){throw new Error("Report should have an interval property")}res=_.pick(response,keys);_.extend(res,queryData);res.startDate=interval.startDate;res.intervalType=interval.type;return res},toJSON:function toJSON(){return{name:this.get("name"),reportType:this.get("reportType"),userId:this.get("userId"),interval:{startDate:this.get("startDate"),type:this.get("intervalType")},timespan:this.get("timespan"),queryData:{queryId:this.get("queryId"),projectId:this.get("projectId")}}},validateReportType:function validateReportType(key,reportType){var allowedReportTypes=_.pluck(reportTypeManager.reportTypes,"type");if(allowedReportTypes.indexOf(reportType)===-1){return"Report type must be one of: "+allowedReportTypes.join(", ")}},validateQueryId:function validateQueryId(key,queryIds){var reportTypeDef=_.findWhere(reportTypeManager.reportTypes,{type:this.get("reportType")});var queryIdsAreValid=_.isArray(queryIds)&&reportTypeDef&&queryIds.length===reportTypeDef.numberOfQueries&&queryIds.every(_.isFinite);if(!queryIdsAreValid){return"Please choose a valid query"}},validateStartDate:function validateStartDate(key,dateStr){var isValidDate;try{isValidDate=new Date(dateStr).toISOString()===dateStr}catch(e){isValidDate=false}if(!isValidDate){return key+" should be an ISO 8601 date string"}},validateIntervalType:function validateIntervalType(key,intervalTypeStr){if(!_.findWhere(INTERVAL_SPECS,{type:intervalTypeStr})){return"intervalType should be one of: "+INTERVAL_SPECS.join(", ")}},validateTimespan:function validateTimespan(key,timespanStr){if(!isoDateHelper.isISODatePeriod(timespanStr)){return"timespan should be an ISO8601 duration string"}}},{MAX_NAME_LENGTH:MAX_NAME_LENGTH,INTERVAL_SPECS:INTERVAL_SPECS})});define("src/extensions/reports/models/ReportScheduleCollection",["backbone","underscore","jquery","bw-fe-helpers/urlHelper","src/extensions/reports/models/ReportSchedule"],function(Backbone,_,$,urlHelper,ReportSchedule){"use strict";return Backbone.Collection.extend({model:ReportSchedule,url:function url(){return urlHelper.buildFullURL("/sharable-reports/schedules?"+$.param(this.getQueryData()))},constructor:function ReportScheduleCollection(models,options){if(!options||!options.projectId){throw new TypeError("ReportScheduleCollection should be instantiated with a projectId")}if(!options.userId){throw new TypeError("ReportScheduleCollection should be instantiated with a userId")}this.pageSize=10;this.page=0;this.projectId=options.projectId;this.userId=options.userId;Backbone.Collection.apply(this,arguments)},parse:function parse(data){this.resultsTotal=data.resultsTotal;this.page=data.resultsPage;this.pageSize=data.resultsPageSize;return data.results},getQueryData:function getQueryData(){return{page:this.page,pageSize:this.pageSize,projectId:this.projectId,userId:this.userId}},setPaging:function setPaging(options){this.page=options.page;this.pageSize=options.pageSize},sync:function sync(method,model,options){options=options||{};options.reset=true;return Backbone.Collection.prototype.sync.apply(this,arguments)},fetch:function fetch(options){options=options||{};var collection=this;options.error=_.wrap(options.error||$.noop,function(func){collection.trigger("error error:fetch");func.apply(this,arguments)});return Backbone.Collection.prototype.fetch.call(this,options)},create:function create(reportModel,options){options=options||{};var collection=this;this.trigger("request");reportModel.save(null,{error:function error(){collection.trigger("error error:create")},success:function success(){if(collection.page===0){collection.resultsTotal++;collection.add(reportModel,{at:0,silent:true})}if(options.success){options.success.apply(this,arguments)}collection.trigger("sync");if(collection.page!==0){collection.page=0;collection.fetch()}}})},add:function add(){var results=Backbone.Collection.prototype.add.apply(this,arguments),pageSize=this.pageSize;if(this.length>pageSize){this.reset(this.first(pageSize),{silent:true})}return results},remove:function remove(){var currentPage=this.page;Backbone.Collection.prototype.remove.apply(this,arguments);if(this.isEmpty()&&currentPage>0){this.page=currentPage-1}}})});define("src/extensions/survey/surveyStorageKeys",[],function(){"use strict";return function(surveyKey){return{SURVEY_KEY_COMPLETED:surveyKey+"SurveyCompleted",SURVEY_KEY_CLOSED:surveyKey+"SurveyClosed",SURVEY_KEY_OPENED:surveyKey+"SurveyOpened",SURVEY_LAST_OPENED:"surveyLastOpened"}}});define("src/extensions/survey/surveyHelper",["moment","src/storageProvider","src/extensions/survey/surveyStorageKeys"],function(moment,storageProvider,surveyKeysStorageFactory){"use strict";function getTime(key){var timestamp=storageProvider.get(key);return timestamp?moment.utc(timestamp):null}function storeTime(key){storageProvider.set(key,moment.utc().toISOString())}return function(surveyKey){var surveyKeysStorage=surveyKeysStorageFactory(surveyKey);return{storeTimeOfSurveyCompletion:function storeTimeOfSurveyCompletion(){storeTime(surveyKeysStorage.SURVEY_KEY_COMPLETED)},storeTimeOfSurveyClosing:function storeTimeOfSurveyClosing(){storeTime(surveyKeysStorage.SURVEY_KEY_CLOSED)},storeTimeOfSurveyOpening:function storeTimeOfSurveyOpening(){storeTime(surveyKeysStorage.SURVEY_LAST_OPENED)},hasSurveyBeenCompleted:function hasSurveyBeenCompleted(){var surveyCompletedTime=getTime(surveyKeysStorage.SURVEY_KEY_COMPLETED);return!!surveyCompletedTime},hasSurveyBeenShownInLastSevenDays:function hasSurveyBeenShownInLastSevenDays(){var surveyClosedTime=getTime(surveyKeysStorage.SURVEY_KEY_CLOSED);return surveyClosedTime>moment.utc().subtract(7,"day")},hasAnySurveyBeenOpenedToday:function hasAnySurveyBeenOpenedToday(){var surveyOpenedTime=getTime(surveyKeysStorage.SURVEY_LAST_OPENED);return moment.utc().diff(surveyOpenedTime,"day")===0}}}});define("src/extensions/survey/surveyAnalyticsEventNames",["src/extensions/survey/surveyStorageKeys"],function(surveyStorageKeysFactory){"use strict";return function(surveyKey){var surveyStorageKeys=surveyStorageKeysFactory(surveyKey),SURVEY_EXTERNAL_LINK_CLICKED=surveyKey+"SurveyExternalLinkClicked";return{ANALYTICS_COLLECTION_COMPLETED:"survey:"+surveyStorageKeys.SURVEY_KEY_COMPLETED,ANALYTICS_COLLECTION_CLOSED:"survey:"+surveyStorageKeys.SURVEY_KEY_CLOSED,ANALYTICS_COLLECTION_EXTERNAL_LINK_CLICKED:"survey:"+SURVEY_EXTERNAL_LINK_CLICKED,ANALYTICS_COLLECTION_OPENED:"survey:"+surveyStorageKeys.SURVEY_KEY_OPENED}}});define("src/extensions/survey/surveyEventsTracker",["src/analytics/Analytics","src/extensions/survey/surveyAnalyticsEventNames"],function(Analytics,surveyAnalyticsEventsFactory){"use strict";return function(surveyKey){var surveyAnalyticsEvents=surveyAnalyticsEventsFactory(surveyKey);return{trackSurveyOpenedEvent:function trackSurveyOpenedEvent(){Analytics.trackMixpanelEvent(surveyAnalyticsEvents.ANALYTICS_COLLECTION_OPENED)},trackSurveyClosedEvent:function trackSurveyClosedEvent(wasSurveyAnswered){Analytics.trackMixpanelEvent(surveyAnalyticsEvents.ANALYTICS_COLLECTION_CLOSED,{surveyAnswered:wasSurveyAnswered})},trackSurveyCompletedEvent:function trackSurveyCompletedEvent(answer){Analytics.trackMixpanelEvent(surveyAnalyticsEvents.ANALYTICS_COLLECTION_COMPLETED,{value:answer})},trackExternalLinkClickedEvent:function trackExternalLinkClickedEvent(){Analytics.trackMixpanelEvent(surveyAnalyticsEvents.ANALYTICS_COLLECTION_EXTERNAL_LINK_CLICKED)}}}});define("mustache!src/extensions/reportsSurvey/templates/reportsSurveyExtensionQuestion",["lib/mustache"],function(mustache){var escapedTemplate="How would you rate your experience with Automated Reports in Brandwatch Analytics?";return function(data,partials,wrap){return mustache.render(escapedTemplate,data,partials,wrap)}});define("mustache!src/extensions/reportsSurvey/templates/reportsSurveyExtensionAnswer",["lib/mustache"],function(mustache){var escapedTemplate='<span class="bold">Thanks!</span>\n\n{{#negative}}\nPlease let us know how we can improve:\n{{/negative}}\n\n{{#neutral}}\nPlease let us know how we can improve:\n{{/neutral}}\n\n{{#positive}}\nWe\'d love it if you could give us more details. A small reward is awaiting you:\n{{/positive}}\n\n<a href="{{extSurveyLink}}" target="_blank" class="js-close ext-survey">3-minute survey</a>\n';return function(data,partials,wrap){return mustache.render(escapedTemplate,data,partials,wrap)}});define("src/extensions/ReportsSurveyExtension",["jquery","moment","src/ModuleWrapper","src/globals/me","src/globals/currentProject","src/views/MicroSurveyView","src/extensions/reports/models/ReportScheduleCollection","src/extensions/survey/surveyHelper","src/extensions/survey/surveyEventsTracker","mustache!src/extensions/reportsSurvey/templates/reportsSurveyExtensionQuestion","mustache!src/extensions/reportsSurvey/templates/reportsSurveyExtensionAnswer"],function($,moment,ModuleWrapper,me,currentProject,MicroSurveyView,ReportScheduleCollection,surveyHelperFactory,surveyEventsTrackerFactory,templateQuestion,templateAnswer){"use strict";var active=false,surveyIsShowing=false,moduleWrapper=new ModuleWrapper,SURVEY_KEY="reports",DAILY_THRESHOLD=2,WEEKLY_THRESHOLD=3,REPORTS_SURVEY_CAMPAIGN_START="2015-04-16T14:00:00.000Z",REPORTS_SURVEY_CAMPAIGN_END="2015-05-16T14:00:00.000Z",SURVEY_LINK_FOR_NEGATIVE_ANSWER="https://docs.google.com/a/brandwatch.com/forms/d/"+"1A57W-RaO2DzNdBx6PfiV66UewSp4LyEidD4NHcCIoGU/viewform",SURVEY_LINK_FOR_NEUTRAL_ANSWER="https://docs.google.com/a/brandwatch.com/forms/d/"+"1eRhjDuUUAKLyZwIcPYPOtyr6xP5KBk7iXRKvPkwzTew/viewform",SURVEY_LINK_FOR_POSITIVE_ANSWER="https://docs.google.com/forms/d/"+"12EIm8HzOXn3lbqeY-hy1hX4YOjX5Ehsft_Bmqr8leWo/viewform?usp=send_form",REPORTS_COLLECTION_PAGE_SIZE=1e3,surveyHelper=surveyHelperFactory(SURVEY_KEY),surveyEventsTracker=surveyEventsTrackerFactory(SURVEY_KEY);function schedulesCreatedOrEditedByCurrentUserInPeriod(collection,numberOfIntervals,intervalType){var threshold=moment.utc().subtract(numberOfIntervals,intervalType);return collection.filter(function(schedule){var modificationDate=schedule.get("updatedAt")||schedule.get("createdAt");return threshold.isBefore(moment.utc(modificationDate))}).length}function hasUserMetDailyThreshold(collection){return schedulesCreatedOrEditedByCurrentUserInPeriod(collection,1,"days")>=DAILY_THRESHOLD}function hasUserMetWeeklyThreshold(collection){return schedulesCreatedOrEditedByCurrentUserInPeriod(collection,1,"week")>=WEEKLY_THRESHOLD}function miniSurveyShouldBeShown(collection){if(surveyIsShowing||surveyHelper.hasAnySurveyBeenOpenedToday()||surveyHelper.hasSurveyBeenCompleted()||surveyHelper.hasSurveyBeenShownInLastSevenDays()){return false}return hasUserMetDailyThreshold(collection)||hasUserMetWeeklyThreshold(collection)}function showSurvey($reportsPageView){surveyIsShowing=true;var $container=$('<div class="js-microsurvey"></div>').prependTo($reportsPageView);var surveyView=MicroSurveyView.show({el:$container,question:templateQuestion(),successMessage:function successMessage(answer){var options={};if(answer<7){options.negative=true;options.extSurveyLink=SURVEY_LINK_FOR_NEGATIVE_ANSWER}else if(answer<9){options.neutral=true;options.extSurveyLink=SURVEY_LINK_FOR_NEUTRAL_ANSWER}else{options.positive=true;options.extSurveyLink=SURVEY_LINK_FOR_POSITIVE_ANSWER}return templateAnswer(options)}});surveyEventsTracker.trackSurveyOpenedEvent();surveyHelper.storeTimeOfSurveyOpening();surveyView.on(MicroSurveyView.EVENT_COMPLETED,function(answer){surveyEventsTracker.trackSurveyCompletedEvent(answer);surveyHelper.storeTimeOfSurveyCompletion()});surveyView.$el.on("click",".ext-survey",function(){surveyEventsTracker.trackExternalLinkClickedEvent()});surveyView.on(MicroSurveyView.EVENT_CLOSED,function(wasSurveyAnswered){surveyEventsTracker.trackSurveyClosedEvent(wasSurveyAnswered);surveyHelper.storeTimeOfSurveyClosing();surveyIsShowing=false})}function wrapReportScheduleFromView($reportsPageView){moduleWrapper.wrapModule("src/extensions/reports/views/ReportScheduleFormView",function(err,ReportScheduleFormView){moduleWrapper.wrap(ReportScheduleFormView,"show",function(originalFunc,options){var view=originalFunc.call(this,options);view.on("confirmed",function(){var collection=new ReportScheduleCollection(null,{userId:me.id,projectId:currentProject.id});collection.pageSize=REPORTS_COLLECTION_PAGE_SIZE;collection.on("sync",function(collection){if(miniSurveyShouldBeShown(collection)){showSurvey($reportsPageView)}});collection.fetch()});return view})})}function enhanceReportPageView(){moduleWrapper.wrapModule("src/extensions/reports/views/ReportsPageView",function(err,ReportsPageView){moduleWrapper.wrap(ReportsPageView.prototype,"render",function(originalFunc,options){originalFunc.call(this,options);wrapReportScheduleFromView(this.$el)})})}return{id:"ReportsSurveyExtension",isActive:function isActive(){return active},apply:function apply(){if(active){return}this.enableSurvey();active=true},enableSurvey:function enableSurvey(){var currentUtcDateInString=(new Date).toISOString();if(currentUtcDateInString>=REPORTS_SURVEY_CAMPAIGN_START&&currentUtcDateInString<=REPORTS_SURVEY_CAMPAIGN_END){enhanceReportPageView()}},restore:function restore(){if(!active){return}active=false;moduleWrapper.restore()}}})})();