define(["src/globals/queries","src/globals/queryGroups"],function(queries,queryGroups){"use strict";function getQueryIds(settings){if(settings.get("currentMode")==="query"){return settings.get("queryId")}return getQueryIdsFromQueryGroups(settings.get("queryGroupId"))}function getQueryIdsFromQueryGroups(){var queryGroupIds=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return[].concat(queryGroupIds).reduce(function(memo,groupId){var queryGroup=queryGroups.get(groupId);if(!queryGroup){return memo}queryGroup.get("queries").forEach(function(query){memo.push(query.id)});return memo},[])}function getQueryTypes(data){if(data.queryId){var queryIds=data.queryId;return queryIds.map(function(id){return queries.get(id).get("type")})}else{var groupId=data.queryGroupId;return queryGroups.getQueryIdsFromGroupIds(groupId).map(function(id){return queries.get(id).get("type")})}}function hasLogoQueriesOnly(settings){var queryIds=getQueryIds(settings);var logoQueryIds=queryIds.filter(function(id){var query=queries.get(id);return query.get("type")==="logo"});return logoQueryIds.length===queryIds.length}function hasAtLeastOneLogoQuery(settings){var queryIds=getQueryIds(settings);return queryIds.some(function(id){var query=queries.get(id);return query.get("type")==="logo"})}function hasAtLeastOneTextQuery(settings){var queryIds=getQueryIds(settings);return queryIds.some(function(id){var query=queries.get(id);return query.get("type")==="text"})}function shouldShowUniqueImages(settings){return hasAtLeastOneLogoQuery(settings)}function hasOnlyInstagramPageType(settings){var pageType=settings.get("pageType");if(!pageType){return false}return pageType.includes("instagram")&&pageType.length===1}function hasOnlyTwitterPageType(settings){var pageType=settings.get("pageType");if(!pageType){return false}return pageType.includes("twitter")&&pageType.length===1}function shouldShowTopHashtags(settings){var hasInstagramFilter=hasOnlyInstagramPageType(settings);var queryIds=getQueryIds(settings);return hasAtLeastOneLogoQuery(settings)&&hasInstagramFilter||hasAtLeastOneTextQuery(settings)&&hasInstagramFilter||hasOnlyTwitterPageType(settings)||queryIds.some(function(id){var query=queries.get(id);return query.get("type")==="instagram"||query.get("type")==="twitter"})}function isLogoQuery(queryTypes){return queryTypes.some(function(queryType){return queryType==="logo"})}function isTwitterOrInstagramQuery(queryTypes){return queryTypes.some(function(queryType){return queryType==="instagram"||queryType==="twitter"})}function hasNewsPageType(settings){var pageType=settings.get("pageType")||[];return pageType.includes("news")}function isTextQuery(queryTypes){return queryTypes.some(function(queryType){return queryType==="text"})}function shouldGetTopNewsStories(settings){if(hasOnlyInstagramPageType(settings)){return false}if(hasNewsPageType(settings)){return true}var xpageType=settings.get("xpageType")||[];if(xpageType.includes("news")){return false}var queryIds=getQueryIds(settings);return queryIds.some(function(id){var query=queries.get(id);return query.get("type")==="text"})}function shouldShowTopNewsStories(settings){return shouldGetTopNewsStories(settings)&&!hasLogoQueriesOnly(settings)}return{getQueryTypes:getQueryTypes,shouldShowUniqueImages:shouldShowUniqueImages,isLogoQuery:isLogoQuery,isTwitterOrInstagramQuery:isTwitterOrInstagramQuery,shouldShowTopHashtags:shouldShowTopHashtags,isTextQuery:isTextQuery,shouldShowTopNewsStories:shouldShowTopNewsStories}});